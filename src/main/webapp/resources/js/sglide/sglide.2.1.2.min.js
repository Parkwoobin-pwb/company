/*
sGlide is a Javascript plugin that generates a simple, highly flexible, feature-rich & mobile-ready slider.
Copyright (C) 2014  Daniel Kazmer
See <http://www.gnu.org/licenses/gpl.html>

author:		Daniel Kazmer - http://iframework.net/sGlide
created:	16.11.2012
version:	2.1.2
*/
function sGlide(e,t){function T(e){switch(e[0]){case"#":return document.getElementById(e.substr(1));case".":return document.getElementsByClassName(e.substr(1));default:return document.getElementsByTagName(e)}}function N(e,t){var n=document.createElement("div");n.innerHTML=t;var r=n.childNodes[0];e[0].parentNode.insertBefore(r,e[0]);for(var i=0;i<e.length;i++)r.appendChild(e[i])}function C(e){if(e===null||typeof e!="object")return e;var t=e.constructor();for(var n in e){if(e.hasOwnProperty(n)){t[n]=C(e[n])}}return t}function k(e,t,n){var r=n?t:{};for(var i in e){if(t[i]instanceof Array){r[i]=[];for(var s=0;s<t[i].length;s++){if(typeof t[i][s]=="object")k(e[i][s],t[i][s]);else r[i].push(t[i][s])}}else if(typeof t[i]=="object")r[i]=k(e[i],t[i]);else r[i]=t[i]===undefined?e[i]:t[i]}return r}function L(e,t,n){var r=e.getAttribute("style")?e.getAttribute("style").split(";"):[],i={},s=null;if(n){var o={};for(var u in t){if(t.hasOwnProperty(u)){for(var a=0;a<n.length;a++){o[n[a]+u]=t[u]}}}t=o}for(var f=0;f<r.length;f++){s=r[f].split(":");if(s.length<2)break;i[s[0].trim()]=s[1].trim()}if(Object.keys(i).length===0)i=t;var l=JSON.stringify(k(i,t,true)).replace(/\{*\}*"*/g,"").replace(/,/g,"; ")||"";e.setAttribute("style",l.trim())}var n=null,r=null,i=0,s="",o=false,u=false,a=false,f=false,l=false,c=null,h=null,p=null,d=null,v=null,m=null,g=null,y=null,b=null,w=null,E=null,S=null,x={down:"mousedown",up:"mouseup",move:"mousemove"};uAgent=navigator.userAgent;this.element=e;if(!(CustomEvent instanceof Function)){(function(){function e(e,t){t=t||{bubbles:false,cancelable:false,detail:undefined};var n=document.createEvent("CustomEvent");n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail);return n}e.prototype=window.Event.prototype;window.CustomEvent=e})()}this.destroy=function(){var t=e.getAttribute("id");var i=T("#"+t+"_vert-marks");if(i){var s=i.parentNode;s.insertBefore(e,i.nextSibling);s.removeChild(i)}var l=T("#"+t+"_markers");if(l)l.parentNode.removeChild(l);if(o){document.removeEventListener(x.down,p)}else if(a||f){document.removeEventListener("keydown",v);document.removeEventListener("keyup",d)}if(u){var N=T("#"+t+"_plus"),C=T("#"+t+"_minus");var k=N.parentNode;N.removeEventListener(x.up,w);N.removeEventListener(x.down,E);C.removeEventListener(x.up,w);C.removeEventListener(x.down,S);k.removeChild(N);k.removeChild(C);if(!i){var L=T("#"+t+"_button-marks");if(L){var A=L.parentNode;A.insertBefore(L.childNodes[0],L.nextSibling);A.removeChild(L)}}}document.removeEventListener(x.move,h);document.removeEventListener(x.up,c);window.removeEventListener("resize",y);window.removeEventListener("orientationchange",y);e.removeEventListener(x.down,b);n.removeEventListener(x.up,m);n.removeEventListener(x.down,g);e.removeChild(n);r.removeEventListener(x.down,b);e.removeChild(r);e.removeAttribute("style");e.removeAttribute("data-state");for(var O in this)delete this[O]};this.startAt=function(t){i=t;var s=e.offsetWidth;var o=n.offsetWidth;if(t<=0)t=0;else if(t>=100)t=100;var u=(s-o)*t/100+o/2;var a=u-o/2;n.style.left=a+"px";r.style.width=u+"px";if(l)r.children[0].style.opacity=t/100;return this};(function(b,T,A){if(e instanceof Element===false)throw new Error("sGlide: first param expected object<Element>, found "+typeof e);if(t instanceof Object===false)throw new Error("sGlide: second param expected object, found "+typeof t);var O=e.id;if(!O)O=e.id="sglide-"+Math.random(1,999);e.innerHTML='<div class="follow_bar"></div><div class="slider_knob"></div>';if(e.children[0].className=="slider_knob"){n=e.children[0];r=e.children[1]}else{n=e.children[1];r=e.children[0]}var M=k({startAt:0,image:"none",height:40,width:100,unit:"%",pill:true,snap:{marks:false,type:false,points:0},disabled:false,colorShift:[],vertical:false,showKnob:true,buttons:false,totalRange:[0,0],retina:true},t);e.removeAttribute("style");if(uAgent.match(/Android/i)||uAgent.match(/webOS/i)||uAgent.match(/iPhone/i)||uAgent.match(/iPad/i)||uAgent.match(/iPod/i)||uAgent.match(/BlackBerry/i)){o=true;x.down="touchstart";x.up="touchend";x.move="touchmove";var _=null,D=null}else if(uAgent.match(/Windows Phone/i)){if(window.navigator.msPointerEnabled){L(e,{"-ms-touch-action":"none"});x.down="MSPointerDown";x.up="MSPointerUp";x.move="MSPointerMove"}else{x.down="touchstart";x.up="touchend";x.move="touchmove"}}var P=i=M.startAt,H=0,B=M.vertical,j=M.snap.points>0&&M.snap.points<=9&&M.snap.marks,F=M.snap.type!="hard"&&M.snap.type!="soft"?false:M.snap.type,I="#333",q=M.showKnob&&!M.disabled?"2%":"0",R=Math.round(M.height)+"px",U="inherit",z=M.pill,W=M.image!="none"&&M.image!==""&&!M.disabled?true:false,X=window.devicePixelRatio>1&&M.retina,V=(M.totalRange[0]!==0||M.totalRange[1]!==0)&&M.totalRange[0]<M.totalRange[1],$=null,J=null;l=M.colorShift.length>1?true:false;a=e.getAttribute("data-keys")=="true"?true:false;f=e.getAttribute("data-keys")=="shift"?true:false;u=M.buttons;if(W){s=M.image;if(X){var K=s.split(".");var Q=K.length;K[Q-2]=K[Q-2]+"@2x";s="";for(var G=0;G<Q;G++){s+=K[G]+(G<Q-1?".":"")}}n.innerHTML='<img src="'+s+'" style="visibility:hidden" />';var Y=n.childNodes[0];Y.onload=function(){if(X){Y.style.width=Y.offsetWidth/2+"px"}var t=Y.offsetHeight;q=Y.offsetWidth+"px";U=t+"px";I="url("+s+") no-repeat";n.style.width=q;n.style.height=U;setTimeout(function(){n.style.background=I;if(X)n.style.backgroundSize="100%"},0);L(r,{height:U,"border-radius":z?t/2+"px 0 0 "+t/2+"px":"0"});L(e,{height:U,"border-radius":z?t/2+"px":"0"});n.removeChild(Y);if(t>M.height){var i=(t-M.height)/2;L(e,{height:M.height+"px"});L(n,{top:"-"+i+"px"});L(r,{height:M.height+"px","border-radius":z?t/2+"px 0 0 "+t/2+"px":"0"})}else{L(e,{overflow:"hidden"})}window.dispatchEvent(It)}}else{var Z=M.height/2;L(e,{"border-radius":z?Z+"px":"0",overflow:"hidden"});L(r,{"border-radius":z?Z+"px 0 0 "+Z+"px":"0"});setTimeout(function(){n.style.backgroundColor=I;window.dispatchEvent(It)},0)}var et=M.unit,tt=M.width;if(et!="px"&&et!="%")et="%";else if(et=="px")tt=Math.round(tt);else if(et=="%"&&Math.round(tt)>100)tt=100;var nt=["-webkit-","-khtml-","-moz-","-ms-","-o-",""],rt={"box-sizing":"border-box"},it={"box-sizing":"content-box"},st={"user-select":"none"},ot={transform:"rotate(-90deg)"};L(e,{width:tt+et,height:R,"text-align":"left",margin:"auto",cursor:!M.disabled?"pointer":"default","z-index":"997",position:"relative","-webkit-touch-callout":"none"});L(e,C(it),nt);L(e,C(st),nt);L(n,{width:q,background:I,height:U,display:!M.disabled?"inline-block":"none","font-size":"0",position:"relative","z-index":"1"});L(n,C(it),nt);L(r,{position:!M.disabled?"absolute":"static",height:"inherit",width:"0"});L(r,C(it),nt);if(B)var ut=e.offsetWidth;var at=false;var ft=Math.round(M.snap.points);var lt=[0];var ct=function(t){if(ft===1)ft=2;var r=n.offsetWidth;var i=e.offsetWidth-r;var s=i/(ft-1);var o=[0];var u=s;while(u<=i+2){o.push(u);u+=s}s=100/(ft-1);u=s;while(u<=101){lt.push(u);u+=s}at=true;if(j){var a=null;if(!t){e.insertAdjacentHTML("afterend",'<div id="'+O+'_markers"></div>');a=A("#"+O+"_markers");L(a,{width:e.offsetWidth+"px",margin:"auto","padding-left":r/2+"px","-webkit-touch-callout":"none"});L(a,{"box-sizing":"border-box"},nt);L(a,{"user-select":"none"},nt)}else{a=A("#"+O+"_markers");a.innerHTML=""}var f="";for(var l=0;l<o.length;l++)f+='<div style="display:inline-block; width:0; height:5px; border-left:#333 solid 1px; position:relative; left:'+(o[l]-l)+'px; float:left"></div>';a.innerHTML=f}};var ht=function(){if(j&&ft>0&&ft<10){var t=[e,A("#"+O+"_markers")];N(t,'<div id="'+O+'_vert-marks" style="margin:0; z-index:997; width:'+tt+et+'; -webkit-backface-visibility:hidden; -moz-backface-visibility:hidden; -ms-backface-visibility:hidden; backface-visibility:hidden"></div>');J=A("#"+O+"_vert-marks");L(e,{width:"100%"});L(J,C(it),nt);L(J,C(ot),nt);L(J,{filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=3)"});L(J,{"transform-origin":ut+"px 0"},nt);for(var n=0;n<t.length;n++)L(t[n],{margin:"0"})}else{L(e,{margin:"0",top:"0",left:"0"});L(e,{"backface-visibility":"hidden"},nt);L(e,C(ot),nt);L(e,{filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=3)"});L(e,{"transform-origin":ut+"px 0"},nt)}};var pt=function(){gt=n.offsetWidth/e.offsetWidth*50;var t="; z-index:1000; position:relative; top:30px",r='<div class="sglide-buttons" id="'+O+'_plus" style="display:inline-block; cursor:pointer'+(B?t:"")+'">&nbsp;+&nbsp;</div>',i='<div class="sglide-buttons" id="'+O+'_minus" style="display:inline-block; cursor:pointer'+(B?t:"")+'">&nbsp;&minus;&nbsp;</div>';if(j){var s=null;if(!B){L(e,{width:"auto"});var o=B?[A("#"+O+"_vert-marks")]:[A("#"+O),A("#"+O+"_markers")];N(o,'<div id="'+O+'_button-marks" style="display:inline-block; vertical-align:middle; width:'+tt+et+'"></div>');s=A("#"+O+"_button-marks")}else{s=A("#"+O+"_vert-marks")}s.insertAdjacentHTML("afterend",r);s.insertAdjacentHTML("beforebegin",i)}else{L(e,{display:!B?"inline-block":"block","vertical-align":"middle"});e.insertAdjacentHTML("afterend",r);e.insertAdjacentHTML("beforebegin",i)}var u=A("#"+O+"_plus"),a=A("#"+O+"_minus");L(a,C(st),nt);L(u,C(st),nt);if(!M.disabled){u.addEventListener(x.down,E);u.addEventListener(x.up,mt);a.addEventListener(x.down,S);a.addEventListener(x.up,mt)}},dt=function(s,o){if(i!==null&&P!==i)P=i;i=null;var u=P;if(wt){var a=100/(M.snap.points-1);var f=a;for(var c=0;c<M.snap.points;c++){if(a>=P){if(s==">")P=Math.round(a)>Math.round(P)?a:a+f;else P=a-f;break}else a+=f}}else{if(s==">")P+=o?1:10;else P-=o?1:10}u=P;if(P+gt>100){P=100;u=100}else if(P-gt<0){P=0;u=0}var h=(e.offsetWidth-n.offsetWidth)*u/100+n.offsetWidth/2;var p=h-n.offsetWidth/2;n.style.left=p+"px";r.style.width=h+"px";if(l)Bt({percent:u});if(t.onButton)t.onButton(Pt(Dt(p)))},vt=function(e){var t=setInterval(function(){if(yt)dt(e,true);else clearInterval(t)},wt?201:10)},mt=function(){yt=false;clearTimeout(bt)},gt=0,yt=false,bt=null;var wt=M.snap.points>0&&M.snap.points<=9&&(F=="hard"||F=="soft");w=mt;E=function(){Et(">")};S=function(){Et("<")};var Et=function(e){yt=true;dt(e);bt=setTimeout(function(){vt(e)},500)};var St=false;g=function(){St=true;e.setAttribute("data-state","active")};m=function(){St=false};n.addEventListener(x.down,g);n.addEventListener(x.up,m);var xt="s-1";var Tt=function(t,i){if(ft>0&&ft<10){var s=n.offsetWidth,o=e.offsetWidth,u=o*(10-ft)/100-2;var a=[];for(var f=0;f<lt.length;f++){a.push((o-s)*lt[f]/100)}var l=null,c=0;for(var h=0;h<a.length;h++){if(l===null||Math.abs(a[h]-i)<Math.abs(l-i)){l=a[h];c=lt[h]}}if(t=="drag"){if(F=="hard"){n.style.left=l+"px";r.style.width=l+s/2+"px";Nt(l,c)}else{if(Math.round(Math.abs(l-i))<u){n.style.left=l+"px";r.style.width=l+s/2+"px";Nt(l,c)}else xt="s-1"}}else{n.style.left=l+"px";r.style.width=l+s/2+"px";return l}}},Nt=function(e,n){if(t.onSnap&&"s"+e!==xt){xt="s"+e;t.onSnap(Pt(Dt(e)))}};if(!o&&(a||f)){var Ct,kt=false,Lt=B?40:37,At=B?38:39;v=function(e){if(!kt&&!M.disabled){if(window.event){Ct=window.event.keyCode;if(f&&!window.event.shiftKey)return false}else if(e){Ct=e.which;if(f&&!e.shiftKey)return false}if(Ct==Lt){S();kt=true}else if(Ct==At){E();kt=true}}};d=function(){kt=false;mt()};b.addEventListener("keydown",v);b.addEventListener("keyup",d)}if(o){p=function(e){_=e.targetTouches[0].pageX;D=e.targetTouches[0].pageY};b.addEventListener(x.down,p)}if(o||uAgent.match(/Windows Phone/i)){window.addEventListener("orientationchange",y)}h=function(i){if(St){i=i||event;var s=null,u=e.offsetWidth,a=n.offsetWidth;if(B){if(window.navigator.msPointerEnabled&&$===null)$=e.getBoundingClientRect().top;else if(J!==null&&$===null)$=J.offsetTop;var f=($!==null?$:e.offsetTop)+u;if(o){D=i.targetTouches[0].pageY;s=f-D}else s=f-i.pageY}else{if(o){_=i.targetTouches[0].pageX;s=_-e.offsetLeft}else s=i.pageX-e.offsetLeft}var c=a/2,h=s-c;if(i.returnValue)i.returnValue=false;if(s<=c){n.style.left="0";r.style.width=c+"px"}else if(s>=u-c){n.style.left=u-a+"px";r.style.width=u-c+"px"}else{n.style.left=s-c+"px";r.style.width=s+"px";if(!F||F=="hard")Tt("drag",h)}H=n.style.left;H=H.replace("px","");if(t.drag&&e.getAttribute("data-state")=="active")t.drag(Pt(Dt(H)));if(l&&e.getAttribute("data-state")=="active")Bt(Dt(H))}};c=function(r){St=false;if(e.getAttribute("data-state")=="active"){r=r||event;var i=null,s=0,u=e.offsetWidth;if(B){s=(!window.navigator.msPointerEnabled?e.offsetTop:e.getBoundingClientRect().top)+u;i=s-((!o?r.pageY:D)-2)}else i=(!o?r.pageX:_)-e.offsetLeft;var a=n.offsetWidth,f=a/2,c=i-f;if(ft>0&&ft<10&&(F=="soft"||F=="hard"))H=Tt("drop",c);else H=c<0?0:c;if(t.drop)t.drop(Pt(Dt(H)));if(t.drag&&e.getAttribute("data-state")=="active")t.drag(Pt(Dt(H)));e.setAttribute("data-state","inactive");if(l)Bt(Dt(H))}if(yt)mt()};y=function(){T.startAt(i);if(j)ct(true)};b.addEventListener(x.move,h);b.addEventListener(x.up,c);window.addEventListener("resize",y);if(V){var Ot=M.totalRange[0];var Mt=M.totalRange[1]-Ot}var _t={percent:null};var Dt=function(t){var r=0;t=parseFloat(t,10);var s=t/(e.offsetWidth-n.offsetWidth)*100;s=Math.min(s,100);if(V)r=Mt*s/100+Ot;P=i=s;_t.percent=s;if(V)_t.custom=r;return _t};var Pt=function(t){t.id=O;t.el=e;return t};var Ht=function(){var t=e.offsetHeight/2;var n="border-radius: "+(z?t+"px 0 0 "+t+"px":"0");L(r,{overflow:"hidden","background-color":M.colorShift[0]});r.innerHTML='<div style="opacity:'+M.startAt/100+"; height:100%; background-color:"+M.colorShift[1]+'; "></div>'};var Bt=function(e){r.children[0].style.opacity=e.percent/100};var jt=function(t){t=t||event;if(t.returnValue)t.returnValue=false;St=true;e.setAttribute("data-state","active");if(!o&&F!=="hard"){var i=e.offsetWidth;var s=n.offsetWidth;var u=null;if(B){if(window.navigator.msPointerEnabled&&$===null)$=e.getBoundingClientRect().top;else if(J!==null&&$===null)$=J.offsetTop;var a=($!==null?$:e.offsetTop)+i;u=a-(t.pageY-2)}else u=t.pageX-e.offsetLeft;var f=u-s/2;if(f<0){f=0;n.style.left="0"}else if(f>=i-s){f=i-s;n.style.left=i-s+"px"}n.style.left=f+"px";r.style.width=f+s/2+"px";if(l)Bt(Dt(f))}};if(!M.disabled){e.addEventListener(x.down,jt);r.addEventListener(x.down,jt)}var Ft=function(e){var n=i;var r=Pt({percent:n});if(ft>0&&ft<10)ct();if(B)ht();if(u)pt();if(l)Ht();if(t.onload)t.onload(r);T.startAt(n);window.removeEventListener("makeready."+O,Ft)};var It=new CustomEvent("makeready."+O);window.addEventListener("makeready."+O,Ft)})(document,this,T)}